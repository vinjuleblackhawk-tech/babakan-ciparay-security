<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Babakan Ciparay Security Report</title>
  <link rel="icon" href="favicon.ico">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background:#f4f6f8; color:#333; line-height:1.6; }
    header { background:#004080; color:#fff; padding:1rem 2rem; text-align:center; }
    header h1 { font-size:2rem; margin-bottom:0.3rem; }
    header p { font-size:1rem; opacity:0.8; }
    nav { display:flex; justify-content:center; gap:10px; margin:1rem 0; flex-wrap:wrap; }
    nav button { padding:0.6rem 1rem; border:1px solid #fff; background:rgba(255,255,255,0.15); color:#fff; border-radius:5px; cursor:pointer; transition:0.3s; }
    nav button:hover { background:#fff; color:#004080; }
    main { max-width:900px; margin:0 auto; padding:2rem; background:#fff; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.05); }
    section { margin-bottom:2rem; }
    section h2 { color:#004080; margin-bottom:1rem; border-bottom:2px solid #004080; display:inline-block; padding-bottom:0.2rem; }
    .report-form { display:flex; flex-direction:column; gap:1rem; }
    .report-form label { font-weight:bold; }
    .report-form input, .report-form textarea { padding:0.6rem; border-radius:5px; border:1px solid #ccc; font-size:1rem; width:100%; }
    .report-form button { padding:0.8rem; background:#004080; color:#fff; border:none; border-radius:5px; cursor:pointer; font-size:1rem; transition:0.3s; }
    .report-form button:hover { background:#0066cc; }
    footer { text-align:center; padding:1rem 2rem; margin-top:2rem; color:#555; font-size:0.9rem; }
    @media (max-width:600px) { nav { flex-direction:column; } }
  </style>
</head>
<body>

  <header>
    <h1>Babakan Ciparay Security Report</h1>
    <p>Submit incidents securely via this portal or WhatsApp</p>
  </header>

  <nav>
    <button onclick="scrollToSection('report')">Kirim Laporan</button>
    <button onclick="scrollToSection('info')">Info Keamanan</button>
    <button onclick="scrollToSection('contacts')">Kontak</button>
  </nav>

  <main>
    <section id="report">
      <h2>Kirim Laporan</h2>
      <form class="report-form" id="reportForm">
        <label for="name">Nama Pelapor</label>
        <input type="text" id="name" name="name" placeholder="Nama lengkap Anda" required>

        <label for="phone">Nomor WhatsApp</label>
        <input type="tel" id="phone" name="phone" placeholder="0812xxxxxxx" required>

        <label for="incident">Jenis Laporan</label>
        <input type="text" id="incident" name="incident" placeholder="Ringkasan kejadian" required>

        <label for="description">Deskripsi Kejadian</label>
        <textarea id="description" name="description" rows="5" placeholder="Detail lengkap kejadian" required></textarea>

        <button type="submit">Kirim Laporan</button>
      </form>
    </section>

    <section id="info">
      <h2>Info Keamanan</h2>
      <p>Berisi update terbaru keamanan dan tips pencegahan di wilayah Babakan Ciparay. Informasi ini akan diperbarui secara berkala.</p>
    </section>

    <section id="contacts">
      <h2>Kontak Penting</h2>
      <p>Untuk bantuan darurat, silakan hubungi:</p>
      <ul>
        <li>Polisi: 110</li>
        <li>Damkar: 113</li>
        <li>Keamanan Lingkungan Babakan Ciparay: 0812xxxxxxx</li>
      </ul>
    </section>
  </main>

  <footer>
    &copy; 2026 Babakan Ciparay Security. All rights reserved.
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

  <!-- Firebase Initialization -->
  <script>
    const firebaseConfig = {
  apiKey: "AIzaSyA0GLK1S4t4bAj0z-v5ELFpG9mr0UCj4eU",
  authDomain: "babakan-ciparay-security.firebaseapp.com",
  projectId: "babakan-ciparay-security",
  storageBucket: "babakan-ciparay-security.firebasestorage.app",
  messagingSenderId: "1043234481620",
  appId: "1:1043234481620:web:d618042580d9acde02e241",
  measurementId: "G-C37FQXNTHZ"
};

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <!-- Form Submission to Firestore + WhatsApp -->
  <script>
    const reportForm = document.getElementById('reportForm');

    reportForm.addEventListener('submit', async function(e) {
      e.preventDefault();

      const name = document.getElementById('name').value.trim();
      const phone = document.getElementById('phone').value.trim();
      const incident = document.getElementById('incident').value.trim();
      const description = document.getElementById('description').value.trim();

      try {
        await db.collection('reports').add({
          name,
          phone,
          incident,
          description,
          timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });

        alert('✅ Laporan berhasil dikirim!');
        reportForm.reset();

        // WhatsApp notification
        const adminPhone = "62812xxxxxxx"; // Replace with your admin WA number
        const message = encodeURIComponent(
          `Laporan baru dari ${name} (${phone}):\nJenis Laporan: ${incident}\nDeskripsi: ${description}`
        );
        window.open(`https://wa.me/${adminPhone}?text=${message}`, '_blank');

      } catch (error) {
        console.error('Error:', error);
        alert('❌ Terjadi kesalahan saat mengirim laporan.');
      }
    });

    function scrollToSection(id) {
      document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    }
  </script>
</body>
</html>
